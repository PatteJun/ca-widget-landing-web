---
import { getLangFromUrl, useTranslations } from '../i18n/ui';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Determine the correct thank you page URL based on language
const thankYouUrl = lang === 'de' ? '/thank-you' : `/${lang}/thank-you`;
---

<section id="contact" class="py-24 bg-gray-50">
  <div class="max-w-7xl mx-auto px-6 lg:px-8">
    <div class="max-w-3xl mx-auto text-center mb-16">
      <h2 class="text-4xl font-bold tracking-tight text-primary-text mb-6">
        {t('contact.title')}
      </h2>
      <p class="text-lg text-secondary-text">
        {t('contact.description')}
      </p>
    </div>

    <div class="max-w-xl mx-auto">
      <form 
        name="contact"
        method="POST"
        data-netlify="true"
        action={thankYouUrl}
        class="bg-white shadow-sm rounded-2xl p-8 space-y-6"
      >
        <input type="hidden" name="form-name" value="contact" />
        <input type="hidden" name="language" value={lang} />
        
        <div>
          <label for="company" class="block text-sm font-medium text-primary-text mb-2">
            {t('contact.form.company')}
          </label>
          <input
            type="text"
            name="company"
            id="company"
            required
            class="block w-full rounded-lg border-gray-200 shadow-sm focus:border-primary focus:ring-primary"
            placeholder={t('contact.form.company.placeholder')}
          />
        </div>

        <div>
          <label for="contact" class="block text-sm font-medium text-primary-text mb-2">
            {t('contact.form.contact')}
          </label>
          <input
            type="text"
            name="contact"
            id="contact"
            required
            class="block w-full rounded-lg border-gray-200 shadow-sm focus:border-primary focus:ring-primary"
            placeholder={t('contact.form.contact.placeholder')}
          />
        </div>

        <div>
          <label for="email" class="block text-sm font-medium text-primary-text mb-2">
            {t('contact.form.email')}
          </label>
          <input
            type="email"
            name="email"
            id="email"
            required
            class="block w-full rounded-lg border-gray-200 shadow-sm focus:border-primary focus:ring-primary"
            placeholder={t('contact.form.email.placeholder')}
          />
        </div>

        <div>
          <label for="phone" class="block text-sm font-medium text-primary-text mb-2">
            {t('contact.form.phone')}
          </label>
          <input
            type="tel"
            name="phone"
            id="phone"
            required
            class="block w-full rounded-lg border-gray-200 shadow-sm focus:border-primary focus:ring-primary"
            placeholder={t('contact.form.phone.placeholder')}
          />
        </div>

        <div>
          <button
            type="submit"
            class="w-full rounded-lg bg-primary px-6 py-3 text-base font-semibold text-white shadow-sm hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"
          >
            {t('contact.form.submit')}
          </button>
        </div>

        <p class="text-sm text-secondary-text text-center">
          {t('contact.form.note')}
        </p>
      </form>
    </div>
  </div>
</section>